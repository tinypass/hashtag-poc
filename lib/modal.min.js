"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}var modal=function(){function t(e,n){_classCallCheck(this,t),this._createModal(e,n)}return _createClass(t,[{key:"_createModal",value:function(i,a){var d=this;jQuery(function(n){var t=n('<div class="pn-modal"><div class="pn-modal-content" id="rec-modal">\n    <div class="pn-header">\n        <button class="pn-modal__close unbutton" id="close">\n            <svg width="18" height="18" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">\n                <path fill-rule="evenodd" clip-rule="evenodd"\n                      d="M1.38464 0L0 1.38477L7.6153 9L0 16.6152L1.38464 18L9 10.3848L16.6154 18L18 16.6157L10.3846 9L18.0001 1.38477L16.6154 0L8.99988 7.61523L1.38464 0Z"/>\n            </svg>\n        </button>\n        <img class="pn-header__background"\n             src="https://i.piano.io/managedservices/the-chive/theChive_Logo_Black.png" width="173" height="36.18"\n             alt="">\n    </div>\n    <div class="content">\n        <h1 class="h1">Don\'t miss our most popular &#x1F600;Humor, &#x1F525;Hotness, and &#x1F397;Humanity posts!</h1>\n    </div>\n    <div id="li_recommended_content">\n    </div>\n</div></div>'),e=n("<div></div>");d._parseLiftIgnite(t),n("#close",t).click(function(){t.remove()}),n("body").append(t);var o=n(document).width();switch(n(window).resize(function(){var e=n("#rec-modal",t).width();o<970&&970<=e?(o=e,googletag.pubads().refresh()):970<=o&&e<970&&(o=e,googletag.pubads().refresh())}),i){case"ad":e=n('<div id="ad-container">\n                                </div>\n                                <p class="ad_text">ADVERTISEMENT</p>'),d._createAds();break;case"subscribe":e=n('<div class="join-now">\n                                  <p class="CTA_text">Get your chive on. Join now.</p>\n                                  <button class="pn-modal__join" type="button" id="subscribe" data-link="'.concat(d.subscribeLink,'">BECOME A MEMBER</button>\n                                  </div>\n                                  <div class="pn-modal__footer">\n                                  </div>\n                                </div>')),n(".pn-modal__join",e).click(function(){if(a)try{tp.log.logMicroConversion(a,d.externalEventId,{})}catch(e){}location.href=n(this).attr("data-link")})}n(".pn-modal-content",t).append(e)})}},{key:"_initAdServer",value:function(){pbjs_piano.initAdserverSet||(pbjs_piano.initAdserverSet=!0,googletag.cmd.push(function(){pbjs_piano.que.push(function(){var e=googletag.pubads().getSlots().filter(function(e){return"ppb-ad-1"===e.getSlotElementId()});pbjs_piano.setTargetingForGPTAsync(),googletag.pubads().refresh(e)})}))}},{key:"_createAds",value:function(t){var o=this;jQuery(function(e){var n=e('<div id="ppb-ad-1"></div>');e("#ad-container",t).append(n);pbjs_piano.que.push(function(){pbjs_piano.requestBids({bidsBackHandler:o._initAdServer,timeout:1e3})}),setTimeout(function(){o._initAdServer()},3e3)})}},{key:"_createArticleCard",value:function(t,o){jQuery(function(e){var n=e('<div class="pn-card"><a href="'.concat(o.url,'"> <img class="img" src="').concat(o.image,'" alt="Avatar">\n                                <h4><b>').concat(o.title,"</b> </h4> </a></div>"));e("#li_recommended_content",t).append(n)})}},{key:"_parseLiftIgnite",value:function(n){var t=this,o=0,i=document.getElementById("liftigniter-received-json"),a=setInterval(function(){var e=JSON.parse(i.innerText);o!==e.length&&e.forEach(function(e){t._createArticleCard(n,e),clearInterval(a)}),o=e.length},1e3)}}],[{key:"init",value:function(e,n,t,o){this.prototype.externalEventId="offer-join-now",this.prototype.subscribeLink=o;this.loadPB("//s3.amazonaws.com/piano-prebid/piano/pbjs_piano.js",[{code:"ppb-ad-1",mediaTypes:{banner:{sizes:[[300,250],[970,250]]}},bids:[{bidder:"appnexus",params:{placementId:14849878}},{bidder:"rubicon",params:{accountId:"13322",siteId:"239774",zoneId:"1183570"}}]}],"/33049290/PIANO",e,n,t),this.addCss()}},{key:"createAdModal",value:function(e){new t("ad",e)}},{key:"createSubscribeModal",value:function(e){new t("subscribe",e)}},{key:"loadPB",value:function(e,n,t,o,i,a){var d=document.createElement("script");d.src=e,d.type="text/javascript",d.async=!0,document.getElementsByTagName("head")[0].appendChild(d),window.pbjs_piano=window.pbjs_piano||{},pbjs_piano.que=pbjs_piano.que||[],pbjs_piano.que.push(function(){pbjs_piano.setConfig({sizeConfig:[{mediaQuery:"(min-width: 1290px)",sizesSupported:[[970,250]],labels:["desktop"]},{mediaQuery:"(min-width: 0px) and (max-width: 1289px)",sizesSupported:[[300,250]],labels:["mobile"]}]}),pbjs_piano.addAdUnits(n)}),window.googletag=window.googletag||{},googletag.cmd=googletag.cmd||[],googletag.cmd.push(function(){var e=googletag.sizeMapping().addSize([1290,0],[970,250]).addSize([0,0],[300,250]).build();googletag.defineSlot(t,e,"ppb-ad-1").defineSizeMapping(e).addService(googletag.pubads()),googletag.pubads().setCentering(!0),googletag.pubads().collapseEmptyDivs(),googletag.pubads().enableSingleRequest(),googletag.pubads().disableInitialLoad(),googletag.pubads().setTargeting("interests",o),googletag.pubads().setTargeting("segments",i),googletag.pubads().setTargeting("url",a),googletag.enableServices()})}},{key:"addCss",value:function(){var e=document.createElement("style");e.innerText=".pn-modal {display: block;position: fixed;z-index: 100000;left: 0;top: 40px;width: 100%;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0);}.pn-modal-content {background-color: #fefefe;margin: 0 auto;border: 1px solid #888;padding-bottom: 20px;width: 75%;}/*font*/@font-face {font-family: 'Helvetica Neue';font-weight: bold;font-style: normal;}@font-face {font-family: 'Helvetica Neue';font-weight: 300;font-style: normal;}.content {width: 970px;margin: 15px auto 10px auto;display: block;text-align: center;}.visually-hidden {position: absolute;width: 1px;height: 1px;margin: -1px;border: 0;padding: 0;white-space: nowrap;-webkit-clip-path: inset(100%);clip-path: inset(100%);clip: rect(0 0 0 0);overflow: hidden;}.pn-modal__close {float: right;margin-top: 15px;margin-right: 25px;width: 18px;height: 18px;}.pn-modal__close svg {fill: #00C300;-webkit-transition: fill 0.2s linear;transition: fill 0.2s linear;}.pn-modal__close:hover svg, .pn-modal__close:focus svg {fill: #00C300;}.pn-modal h1 {font-size: 25px;font-weight: bold;line-height: 38px;font-family: 'Helvetica Neue', sans-serif;margin: 0;}.pn-header {width: 100%;height: 77px;}.pn-header__background {width: 173px;height: 36.18px;float: left;margin: 20px 35px;}.unbutton {color: inherit;text-decoration: none;background-color: rgba(0, 0, 0, 0);-webkit-box-shadow: none;box-shadow: none;text-shadow: none;border: 0;}#li_recommended_content {width: 100%;display: flex;flex-wrap: wrap;flex-direction: row;justify-content: center;margin-bottom: 20px;}.pn-card {transition: 0.3s;width: 29%;height:100%;padding:20px;position: relative;margin-right: 5px;margin-left: 5px;margin-bottom: 20px;}.img:hover {box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2);}/*.container {*//*width: 100%;*//*}*/.pn-card h4 {font-size: 12px;z-index: 20002;margin-top:10px;line-height: 20px;color: #000000;}.pn-modal a {color: #ffffff;text-decoration: none;font-family: 'Helvetica Neue';font-style: normal;}.pn-modal .img {width: 100%;height:100%;border-radius:5px;}.pn-modal .ad {margin: auto;display: block;padding: 25px;width: 100%;}.pn-modal .ad_text {text-align: center;font-size: 11px;color: #00C300;font-family: 'Helvetica Neue';font-style: normal;}.pn-modal .CTA_text {font-family: 'Helvetica Neue', sans-serif;text-align: center;font-size: 29px;margin: 40px;}.pn-modal .pn-modal__join {width: 250px;margin: 0 auto;display: block;padding: 10px 5px;font-family: 'Helvetica', sans-serif;font-weight: 900;font-size: 16px;line-height: 20px;color: #ffffff;background-color: #00C300;transition: background-color 0.2s linear;}.pn-modal__join:hover, .pn-modal__join:focus {background-color: #00C300;color: #ffffff;border: 2px solid #00c300;}.pn-modal__join:active {opacity: 0.8;}.pn-modal__join:visited {color: #ffffff;background-color: #00c300;}@media only screen and (max-width: 1448px) {.pn-modal .content {width: 480px;}}",document.getElementsByTagName("head")[0].appendChild(e)}}]),t}();
